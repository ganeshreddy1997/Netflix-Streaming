package io.springboot2.x.service.impl;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.BeanUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import io.springboot2.x.domain.NetflixDevice;
import io.springboot2.x.dto.NetflixDevice2DTO;
import io.springboot2.x.dto.NetflixDeviceDTO;
import io.springboot2.x.repository.NetflixDeviceRepository;
import io.springboot2.x.service.INetflixDeviceService;
@Service
public class NetflixDeviceServiceImpl implements INetflixDeviceService {
@Autowired 
private NetflixDeviceRepository repo;
	@Override
	public String addDevice(NetflixDeviceDTO device) {
		NetflixDevice obj=new NetflixDevice();
		BeanUtils.copyProperties(device,obj );
		repo.save(obj);
		return "successfully added device";
	}

	@Override
	public List<NetflixDevice2DTO> readAll() {
	List<NetflixDevice> devices=repo.findAll();
	List<NetflixDevice2DTO> devicesDto=new ArrayList<>();//this is empty list
	devices.forEach(device->{
		NetflixDevice2DTO dest=new NetflixDevice2DTO();
		BeanUtils.copyProperties(device, dest);
		devicesDto.add(dest);
	});
		return devicesDto;
	}

	@Override
	public List<NetflixDevice2DTO> readByMobile(String mobileNo) {
		List<NetflixDevice> device2=repo.findByMobileNo(mobileNo);
		List<NetflixDevice2DTO> devices2Dto=new ArrayList<>();
		device2.forEach(record->{
			NetflixDevice2DTO dto=new NetflixDevice2DTO();
			BeanUtils.copyProperties(record, dto);
			devices2Dto.add(dto);
			
		});
		return devices2Dto;
	}

	@Override
	public String updateDevice(NetflixDevice device) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String deleteById(Integer id) {
		// TODO Auto-generated method stub
		return null;
	}

}
 